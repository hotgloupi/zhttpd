<?xml version="1.0"?>
<configuration>

    <server>
        <modules-directory path="modules/" />
        <listen port="8080" />
        <listen port="8081" />
        <listen port="4443" io-module="mod_ssl"/>
        <index-files>
            <filename match="index.pl" />
            <filename match="index.php" />
            <filename match="index.html" />
            <filename match="index.php5" />
        </index-files>

    </server>

    <modules>
        <module name="mod_itworks" />

        <module name="mod_dirlisting" />

        <module name="mod_cgi" enabled="false">
            <option key="php" value="/usr/bin/php-cgi" /> <!-- key: file extention -->
            <option key="php3" value="/usr/bin/php-cgi" /> <!-- value: associated command/program -->
            <option key="pl" value="/usr/bin/perl" />
        </module>

        <module name="mod_lua" enabled="true" />

        <module name="mod_filereader" >
            <option key=".jpg" value="image/jpeg" />
            <option key=".so" value="octet/stream" />
        </module>

        <module name="mod_ssl">
            <option key="certif_file" value="doc/server.pem" />
            <option key="private_file" value="doc/server.pem" />
            <option key="password" value="password" />
        </module>
    </modules>

    <vhosts>
        <vhost name="monsite">
            <document-root path="/var/www/" />
            <host match="www.monsite.com" />
            <listen port="4443" deny="true" />

            <vhost name="monsiteimg">
                <document-root path="/var/www/" />
                <host match="*.monsite.com" />
            </vhost>
        </vhost>

        <vhost name="monsitesecure">
            <document-root path="/var/www/secure/" />
            <host match="*monsite.com" />
            <listen port="8080" deny="true" />
        </vhost>

        <vhost name="toto">
            <vhost name="firefox">
                <document-root path="/var/www/firefox/" />

                <vhost name="itworks">
                    <url match="*index.html" />
                    <document-root path="/home/ipc/" />

                    <module name="mod_filereader" enabled="true" />
                    <module name="mod_lua" enabled="false" />
                    <module name="mod_cgi" enabled="false" />
                    <module name="mod_itworks" enabled="false" />
                </vhost>

                <vhost name="fileReader">
                    <document-root path="tests/" />
                    <listen port="8080" deny="true" />
                    <module name="mod_itworks" enabled="false" />

                    <vhost name="itworks2">
                        <url match="toto" />
                        <module name="mod_itworks" enabled="true" />
                    </vhost>
                </vhost>
           </vhost>

        </vhost>
    </vhosts>
</configuration>
